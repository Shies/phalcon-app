jQuery.extend({createUploadIframe:function(g,e){var f="jUploadFrame"+g;var h='<iframe id="'+f+'" name="'+f+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){if(typeof e==="boolean"){h+=' src="javascript:false"'}else{if(typeof e==="string"){h+=' src="'+e+'"'}}}h+=" />";jQuery(h).appendTo(document.body);return jQuery("#"+f).get(0)},createUploadForm:function(r,i,o){var k="jUploadForm"+r;var p="jUploadFile"+r;var q=jQuery('<form  action="" method="POST" name="'+k+'" id="'+k+'" enctype="multipart/form-data"></form>');if(o){for(var n in o){jQuery('<input type="hidden" name="'+n+'" value="'+o[n]+'" />').appendTo(q)}}var m=jQuery("#"+i);var l=jQuery(m).clone();jQuery(m).attr("id",p);jQuery(m).before(l);jQuery(m).appendTo(q);jQuery(q).css("position","absolute");jQuery(q).css("top","-1200px");jQuery(q).css("left","-1200px");jQuery(q).appendTo("body");return q},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=new Date().getTime();var s=jQuery.createUploadForm(t,e.fileElementId,(typeof(e.data)==="undefined"?false:e.data));var m=jQuery.createUploadIframe(t,e.secureuri);var n="jUploadFrame"+t;var l="jUploadForm"+t;if(e.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var r=false;var p={};if(e.global){jQuery.event.trigger("ajaxSend",[p,e])}var q=function(b){var c=document.getElementById(n);try{if(c.contentWindow){p.responseText=c.contentWindow.document.body?c.contentWindow.document.body.innerHTML:null;p.responseXML=c.contentWindow.document.XMLDocument?c.contentWindow.document.XMLDocument:c.contentWindow.document}else{if(c.contentDocument){p.responseText=c.contentDocument.document.body?c.contentDocument.document.body.innerHTML:null;p.responseXML=c.contentDocument.document.XMLDocument?c.contentDocument.document.XMLDocument:c.contentDocument.document}}}catch(d){jQuery.handleError(e,p,null,d)}if(p||b==="timeout"){r=true;var a;try{a=b!=="timeout"?"success":"error";if(a!=="error"){var f=jQuery.uploadHttpData(p,e.dataType);if(e.success){e.success(f,a)}if(e.global){jQuery.event.trigger("ajaxSuccess",[p,e])}}else{jQuery.handleError(e,p,a)}}catch(d){a="error";jQuery.handleError(e,p,a,d)}if(e.global){jQuery.event.trigger("ajaxComplete",[p,e])}if(e.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(e.complete){e.complete(p,a)}jQuery(c).unbind();setTimeout(function(){try{jQuery(c).remove();jQuery(s).remove()}catch(g){jQuery.handleError(e,p,null,g)}},100);p=null}};if(e.timeout>0){setTimeout(function(){if(!r){q("timeout")}},e.timeout)}try{var s=jQuery("#"+l);jQuery(s).attr("action",e.url);jQuery(s).attr("method","POST");jQuery(s).attr("target",n);if(s.encoding){jQuery(s).attr("encoding","multipart/form-data")}else{jQuery(s).attr("enctype","multipart/form-data")}jQuery(s).submit()}catch(o){jQuery.handleError(e,p,null,o)}jQuery("#"+n).load(q);return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type==="xml"||data?r.responseXML:r.responseText;if(type==="script"){jQuery.globalEval(data)}if(type==="json"){eval("data = "+data)}if(type==="html"){jQuery("<div>").html(data).evalScripts()}return data},handleError:function(b,d,a,c){if(b.error){b.error.call(b.context||b,d,a,c)}if(b.global){(b.context?jQuery(b.context):jQuery.event).trigger("ajaxError",[d,b,c])}}});